<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="296px" preserveAspectRatio="none" style="width:567px;height:296px;" version="1.1" viewBox="0 0 567 296" width="567px" zoomAndPan="magnify"><defs><filter height="300%" id="f1azuyromxzf3g" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="76" x="239" y="18.6855">Throttling</text><!--MD5=[b02c8a8cc952b3f40fdd00dad50552b9]
class black--><rect codeLine="13" fill="#F8F8F8" filter="url(#f1azuyromxzf3g)" height="103.3438" id="black" style="stroke: #383838; stroke-width: 1.5;" width="144" x="7" y="36.6406"/><ellipse cx="51.75" cy="52.6406" fill="#C2C2C2" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M54.5156,48.5156 Q54.6719,48.2969 54.8594,48.1875 Q55.0469,48.0781 55.2656,48.0781 Q55.6406,48.0781 55.875,48.3438 Q56.1094,48.5938 56.1094,49.2031 L56.1094,50.6563 Q56.1094,51.2656 55.875,51.5313 Q55.6406,51.7969 55.2656,51.7969 Q54.9219,51.7969 54.7188,51.5938 Q54.5156,51.4063 54.4063,50.8906 Q54.3594,50.5313 54.1719,50.3438 Q53.8438,49.9688 53.2344,49.75 Q52.625,49.5313 52,49.5313 Q51.2344,49.5313 50.5938,49.8594 Q49.9688,50.1875 49.4688,50.9375 Q48.9844,51.6875 48.9844,52.7188 L48.9844,53.8125 Q48.9844,55.0469 49.875,55.875 Q50.7656,56.6875 52.3594,56.6875 Q53.2969,56.6875 53.9531,56.4375 Q54.3438,56.2813 54.7656,55.8438 Q55.0313,55.5781 55.1719,55.5 Q55.3281,55.4219 55.5313,55.4219 Q55.8594,55.4219 56.1094,55.6875 Q56.375,55.9375 56.375,56.2813 Q56.375,56.625 56.0313,57.0313 Q55.5313,57.6094 54.7344,57.9375 Q53.6563,58.3906 52.3594,58.3906 Q50.8438,58.3906 49.6406,57.7656 Q48.6563,57.2656 47.9688,56.2031 Q47.2813,55.125 47.2813,53.8438 L47.2813,52.6875 Q47.2813,51.3594 47.8906,50.2188 Q48.5156,49.0625 49.6094,48.4531 Q50.7031,47.8281 51.9375,47.8281 Q52.6719,47.8281 53.3125,48 Q53.9688,48.1563 54.5156,48.5156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="46" x="72.25" y="57.5508">Blacklist</text><line style="stroke: #383838; stroke-width: 1.5;" x1="8" x2="150" y1="68.6406" y2="68.6406"/><ellipse cx="18" cy="79.6406" fill="none" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="27" y="84.0596">lapse: TimeSpan</text><ellipse cx="18" cy="93.4766" fill="none" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="118" x="27" y="97.8955">elements: MemoryCache</text><line style="stroke: #383838; stroke-width: 1.5;" x1="8" x2="150" y1="104.3125" y2="104.3125"/><ellipse cx="18" cy="115.3125" fill="#A6A6A6" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="34" x="27" y="119.7314">add(id)</text><ellipse cx="18" cy="129.1484" fill="#A6A6A6" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="71" x="27" y="133.5674">exists(id): bool</text><!--MD5=[2ad84a3bd2e226e46d8e52bba72c5eb4]
class attr--><rect codeLine="20" fill="#F8F8F8" filter="url(#f1azuyromxzf3g)" height="83.8594" id="attr" style="stroke: #383838; stroke-width: 1.5;" width="187" x="186.5" y="46.1406"/><ellipse cx="233.25" cy="66.2344" fill="#C2C2C2" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M236.0156,62.1094 Q236.1719,61.8906 236.3594,61.7813 Q236.5469,61.6719 236.7656,61.6719 Q237.1406,61.6719 237.375,61.9375 Q237.6094,62.1875 237.6094,62.7969 L237.6094,64.25 Q237.6094,64.8594 237.375,65.125 Q237.1406,65.3906 236.7656,65.3906 Q236.4219,65.3906 236.2188,65.1875 Q236.0156,65 235.9063,64.4844 Q235.8594,64.125 235.6719,63.9375 Q235.3438,63.5625 234.7344,63.3438 Q234.125,63.125 233.5,63.125 Q232.7344,63.125 232.0938,63.4531 Q231.4688,63.7813 230.9688,64.5313 Q230.4844,65.2813 230.4844,66.3125 L230.4844,67.4063 Q230.4844,68.6406 231.375,69.4688 Q232.2656,70.2813 233.8594,70.2813 Q234.7969,70.2813 235.4531,70.0313 Q235.8438,69.875 236.2656,69.4375 Q236.5313,69.1719 236.6719,69.0938 Q236.8281,69.0156 237.0313,69.0156 Q237.3594,69.0156 237.6094,69.2813 Q237.875,69.5313 237.875,69.875 Q237.875,70.2188 237.5313,70.625 Q237.0313,71.2031 236.2344,71.5313 Q235.1563,71.9844 233.8594,71.9844 Q232.3438,71.9844 231.1406,71.3594 Q230.1563,70.8594 229.4688,69.7969 Q228.7813,68.7188 228.7813,67.4375 L228.7813,66.2813 Q228.7813,64.9531 229.3906,63.8125 Q230.0156,62.6563 231.1094,62.0469 Q232.2031,61.4219 233.4375,61.4219 Q234.1719,61.4219 234.8125,61.5938 Q235.4688,61.75 236.0156,62.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="78" x="257.25" y="63.5977">«middleware»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="85" x="253.75" y="78.6914">ThrottleAttribute</text><line style="stroke: #383838; stroke-width: 1.5;" x1="187.5" x2="372.5" y1="86.3281" y2="86.3281"/><ellipse cx="197.5" cy="97.3281" fill="none" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="206.5" y="101.7471">param: string</text><line style="stroke: #383838; stroke-width: 1.5;" x1="187.5" x2="372.5" y1="108.1641" y2="108.1641"/><ellipse cx="197.5" cy="119.1641" fill="#A6A6A6" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="161" x="206.5" y="123.583">onActionExecution(context, next)</text><!--MD5=[f5e7ee3b479df05c99880ad25cfdce2c]
class manager--><rect codeLine="25" fill="#F8F8F8" filter="url(#f1azuyromxzf3g)" height="117.1797" id="manager" style="stroke: #383838; stroke-width: 1.5;" width="144" x="409" y="29.6406"/><ellipse cx="429.85" cy="45.6406" fill="#C2C2C2" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M432.6156,41.5156 Q432.7719,41.2969 432.9594,41.1875 Q433.1469,41.0781 433.3656,41.0781 Q433.7406,41.0781 433.975,41.3438 Q434.2094,41.5938 434.2094,42.2031 L434.2094,43.6563 Q434.2094,44.2656 433.975,44.5313 Q433.7406,44.7969 433.3656,44.7969 Q433.0219,44.7969 432.8188,44.5938 Q432.6156,44.4063 432.5063,43.8906 Q432.4594,43.5313 432.2719,43.3438 Q431.9438,42.9688 431.3344,42.75 Q430.725,42.5313 430.1,42.5313 Q429.3344,42.5313 428.6938,42.8594 Q428.0688,43.1875 427.5688,43.9375 Q427.0844,44.6875 427.0844,45.7188 L427.0844,46.8125 Q427.0844,48.0469 427.975,48.875 Q428.8656,49.6875 430.4594,49.6875 Q431.3969,49.6875 432.0531,49.4375 Q432.4438,49.2813 432.8656,48.8438 Q433.1313,48.5781 433.2719,48.5 Q433.4281,48.4219 433.6313,48.4219 Q433.9594,48.4219 434.2094,48.6875 Q434.475,48.9375 434.475,49.2813 Q434.475,49.625 434.1313,50.0313 Q433.6313,50.6094 432.8344,50.9375 Q431.7563,51.3906 430.4594,51.3906 Q428.9438,51.3906 427.7406,50.7656 Q426.7563,50.2656 426.0688,49.2031 Q425.3813,48.125 425.3813,46.8438 L425.3813,45.6875 Q425.3813,44.3594 425.9906,43.2188 Q426.6156,42.0625 427.7094,41.4531 Q428.8031,40.8281 430.0375,40.8281 Q430.7719,40.8281 431.4125,41 Q432.0688,41.1563 432.6156,41.5156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="99" x="445.15" y="50.5508">ThrottlingManager</text><line style="stroke: #383838; stroke-width: 1.5;" x1="410" x2="552" y1="61.6406" y2="61.6406"/><ellipse cx="420" cy="72.6406" fill="none" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="429" y="77.0596">lapse: TimeSpan</text><ellipse cx="420" cy="86.4766" fill="none" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="429" y="90.8955">allow: ushort</text><ellipse cx="420" cy="100.3125" fill="none" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="118" x="429" y="104.7314">elements: MemoryCache</text><line style="stroke: #383838; stroke-width: 1.5;" x1="410" x2="552" y1="111.1484" y2="111.1484"/><ellipse cx="420" cy="122.1484" fill="#A6A6A6" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="75" x="429" y="126.5674">throttle(id): bool</text><ellipse cx="420" cy="135.9844" fill="#A6A6A6" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="429" y="140.4033">remove(id)</text><!--MD5=[75b2cead06df7df282dc28df7c155314]
class cache--><rect codeLine="33" fill="#F8F8F8" filter="url(#f1azuyromxzf3g)" height="75.6719" id="cache" style="stroke: #383838; stroke-width: 1.5;" width="115" x="423.5" y="206.6406"/><ellipse cx="438.5" cy="222.6406" fill="#C2C2C2" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M441.2656,218.5156 Q441.4219,218.2969 441.6094,218.1875 Q441.7969,218.0781 442.0156,218.0781 Q442.3906,218.0781 442.625,218.3438 Q442.8594,218.5938 442.8594,219.2031 L442.8594,220.6563 Q442.8594,221.2656 442.625,221.5313 Q442.3906,221.7969 442.0156,221.7969 Q441.6719,221.7969 441.4688,221.5938 Q441.2656,221.4063 441.1563,220.8906 Q441.1094,220.5313 440.9219,220.3438 Q440.5938,219.9688 439.9844,219.75 Q439.375,219.5313 438.75,219.5313 Q437.9844,219.5313 437.3438,219.8594 Q436.7188,220.1875 436.2188,220.9375 Q435.7344,221.6875 435.7344,222.7188 L435.7344,223.8125 Q435.7344,225.0469 436.625,225.875 Q437.5156,226.6875 439.1094,226.6875 Q440.0469,226.6875 440.7031,226.4375 Q441.0938,226.2813 441.5156,225.8438 Q441.7813,225.5781 441.9219,225.5 Q442.0781,225.4219 442.2813,225.4219 Q442.6094,225.4219 442.8594,225.6875 Q443.125,225.9375 443.125,226.2813 Q443.125,226.625 442.7813,227.0313 Q442.2813,227.6094 441.4844,227.9375 Q440.4063,228.3906 439.1094,228.3906 Q437.5938,228.3906 436.3906,227.7656 Q435.4063,227.2656 434.7188,226.2031 Q434.0313,225.125 434.0313,223.8438 L434.0313,222.6875 Q434.0313,221.3594 434.6406,220.2188 Q435.2656,219.0625 436.3594,218.4531 Q437.4531,217.8281 438.6875,217.8281 Q439.4219,217.8281 440.0625,218 Q440.7188,218.1563 441.2656,218.5156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="83" x="452.5" y="227.5508">RequestCache</text><line style="stroke: #383838; stroke-width: 1.5;" x1="424.5" x2="537.5" y1="238.6406" y2="238.6406"/><ellipse cx="434.5" cy="249.6406" fill="none" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="42" x="443.5" y="254.0596">times: int</text><ellipse cx="434.5" cy="263.4766" fill="none" rx="3" ry="3" style="stroke: #545454; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="443.5" y="267.8955">start: datetime</text><line style="stroke: #383838; stroke-width: 1.5;" x1="424.5" x2="537.5" y1="274.3125" y2="274.3125"/><!--MD5=[cd9eeaf9b07e15d3723fb4c4d1481604]
link black to attr--><path codeLine="9" d="M151.234,88.1406 C162.971,88.1406 174.707,88.1406 186.444,88.1406 " fill="none" id="black-attr" style="stroke: #383838; stroke-width: 1.0;"/><!--MD5=[9a9402460d0739f681485d30370c0c9c]
link attr to manager--><path codeLine="10" d="M373.826,88.1406 C385.548,88.1406 397.27,88.1406 408.993,88.1406 " fill="none" id="attr-manager" style="stroke: #383838; stroke-width: 1.0;"/><!--MD5=[800f50799e5fc33281f156495e1ec9db]
link manager to cache--><path codeLine="11" d="M481,146.6706 C481,166.5746 481,188.351 481,206.2158 " fill="none" id="manager-cache" style="stroke: #383838; stroke-width: 1.0;"/><!--MD5=[eb57c140b5a772227356b55081673291]
@startuml throttlingClass
skinparam monochrome true

title Throttling
class "Blacklist" as black
class "ThrottleAttribute" as attr <<middleware>>
class "ThrottlingManager" as manager
class "RequestCache" as cache

black - attr
attr - manager
manager - - cache

class black {
  +lapse: TimeSpan
  +elements: MemoryCache
  +add(id)
  +exists(id): bool
}

class attr {
  +param: string
  +onActionExecution(context, next)
}

class manager {
  +lapse: TimeSpan
  +allow: ushort 
  +elements: MemoryCache
  +throttle(id): bool
  +remove(id)
}

class cache {
  +times: int
  +start: datetime 
}
@enduml

PlantUML version 1.2020.18(Thu Oct 01 05:40:44 AEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: AU
--></g></svg>