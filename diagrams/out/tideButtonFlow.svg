<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="973px" preserveAspectRatio="none" style="width:908px;height:973px;" version="1.1" viewBox="0 0 908 973" width="908px" zoomAndPan="magnify"><defs><filter height="300%" id="f1devmk6onxmo0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="229" x="341.75" y="28.708">Client - Button - Ork Flow</text><rect fill="#FFFFFF" filter="url(#f1devmk6onxmo0)" height="675.6563" style="stroke: #383838; stroke-width: 1.0;" width="10" x="300.5" y="236.3125"/><rect fill="#FFFFFF" filter="url(#f1devmk6onxmo0)" height="264.0625" style="stroke: #383838; stroke-width: 1.0;" width="10" x="589.5" y="304.5781"/><rect fill="#FFFFFF" filter="url(#f1devmk6onxmo0)" height="286.0625" style="stroke: #383838; stroke-width: 1.0;" width="10" x="762.5" y="589.7734"/><rect fill="#FFFFFF" filter="url(#f1devmk6onxmo0)" height="77.3984" style="stroke: #000000; stroke-width: 2.0;" width="619" x="61" y="484.2422"/><rect fill="#FFFFFF" height="31.1328" style="stroke: none; stroke-width: 1.0;" width="619" x="61" y="530.5078"/><rect fill="#FFFFFF" filter="url(#f1devmk6onxmo0)" height="197.7969" style="stroke: #000000; stroke-width: 2.0;" width="833" x="61" y="686.0391"/><rect fill="#FFFFFF" height="31.1328" style="stroke: none; stroke-width: 1.0;" width="833" x="61" y="852.7031"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="139" x2="139" y1="75.25" y2="929.9688"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="305" x2="305" y1="75.25" y2="929.9688"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="594" x2="594" y1="75.25" y2="929.9688"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="767.5" x2="767.5" y1="75.25" y2="929.9688"/><rect fill="#F8F8F8" filter="url(#f1devmk6onxmo0)" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="53" x="111" y="39.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="118" y="59.9482">Client</text><rect fill="#F8F8F8" filter="url(#f1devmk6onxmo0)" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="53" x="111" y="928.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="118" y="948.9639">Client</text><rect fill="#F8F8F8" filter="url(#f1devmk6onxmo0)" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="91" x="258" y="39.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="265" y="59.9482">TideButton</text><rect fill="#F8F8F8" filter="url(#f1devmk6onxmo0)" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="91" x="258" y="928.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="265" y="948.9639">TideButton</text><rect fill="#F8F8F8" filter="url(#f1devmk6onxmo0)" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="67" x="559" y="39.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="566" y="59.9482">Enclave</text><rect fill="#F8F8F8" filter="url(#f1devmk6onxmo0)" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="67" x="559" y="928.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="566" y="948.9639">Enclave</text><rect fill="#F8F8F8" filter="url(#f1devmk6onxmo0)" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="58" x="736.5" y="39.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="743.5" y="59.9482">Server</text><rect fill="#F8F8F8" filter="url(#f1devmk6onxmo0)" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="58" x="736.5" y="928.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="743.5" y="948.9639">Server</text><rect fill="#FFFFFF" filter="url(#f1devmk6onxmo0)" height="675.6563" style="stroke: #383838; stroke-width: 1.0;" width="10" x="300.5" y="236.3125"/><rect fill="#FFFFFF" filter="url(#f1devmk6onxmo0)" height="264.0625" style="stroke: #383838; stroke-width: 1.0;" width="10" x="589.5" y="304.5781"/><rect fill="#FFFFFF" filter="url(#f1devmk6onxmo0)" height="286.0625" style="stroke: #383838; stroke-width: 1.0;" width="10" x="762.5" y="589.7734"/><path d="M5,90.25 L5,205.25 L270,205.25 L270,100.25 L260,90.25 L5,90.25 " fill="#ECECEC" filter="url(#f1devmk6onxmo0)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M260,90.25 L260,100.25 L270,100.25 L260,90.25 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="11" y="107.3169">c = {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="19" y="122.4497">origin = window.origin</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="236" x="19" y="137.5825">sign = sign(window.origin,vendorPriv)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="19" y="152.7153">server = backendServer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="19" y="167.8481">ork = chosenOrkForModal</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="19" y="182.981">public = vendorPub</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="11" y="198.1138">}</text><polygon fill="#383838" points="288.5,232.3125,298.5,236.3125,288.5,240.3125,292.5,236.3125" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="139.5" x2="294.5" y1="236.3125" y2="236.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="146.5" y="231.2466">new TideButton(c)</text><path d="M226,249.3125 L226,274.3125 L673,274.3125 L673,259.3125 L663,249.3125 L226,249.3125 " fill="#ECECEC" filter="url(#f1devmk6onxmo0)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M663,249.3125 L663,259.3125 L673,259.3125 L663,249.3125 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="320" x="283" y="266.3794">win = new Window(url: c.ork, name: c.origin,c.sign)</text><polygon fill="#383838" points="321.5,300.5781,311.5,304.5781,321.5,308.5781,317.5,304.5781" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="315.5" x2="588.5" y1="304.5781" y2="304.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="327.5" y="299.5122">opener.postMessage("onload")</text><polygon fill="#383838" points="577.5,329.7109,587.5,333.7109,577.5,337.7109,581.5,333.7109" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="310.5" x2="583.5" y1="333.7109" y2="333.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="317.5" y="328.645">win.postMessage("init",c.server,c.public)</text><path d="M474,346.7109 L474,371.7109 L710,371.7109 L710,356.7109 L700,346.7109 L474,346.7109 " fill="#ECECEC" filter="url(#f1devmk6onxmo0)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M700,346.7109 L700,356.7109 L710,356.7109 L700,346.7109 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="480" y="363.7778">tide = new Tide(c.server, c.public)</text><path d="M428,385.8438 L428,425.8438 L756,425.8438 L756,395.8438 L746,385.8438 L428,385.8438 " fill="#ECECEC" filter="url(#f1devmk6onxmo0)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M746,385.8438 L746,395.8438 L756,395.8438 L746,385.8438 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="434" y="402.9106">cvk = tide.register(user,pass);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="307" x="434" y="418.0435">token = encode({vuid,datetimeCheck},cvk.priv)</text><line style="stroke: #383838; stroke-width: 1.0;" x1="599.5" x2="641.5" y1="456.2422" y2="456.2422"/><line style="stroke: #383838; stroke-width: 1.0;" x1="641.5" x2="641.5" y1="456.2422" y2="469.2422"/><line style="stroke: #383838; stroke-width: 1.0;" x1="600.5" x2="641.5" y1="469.2422" y2="469.2422"/><polygon fill="#383838" points="610.5,465.2422,600.5,469.2422,610.5,473.2422,606.5,469.2422" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="606.5" y="451.1763">validate(c.sign,c.public)</text><path d="M61,484.2422 L125,484.2422 L125,491.2422 L115,501.2422 L61,501.2422 L61,484.2422 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="77.3984" style="stroke: #000000; stroke-width: 2.0;" width="619" x="61" y="484.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="76" y="497.3091">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="169" x="140" y="496.4526">[origin == sign &amp;&amp; valid ?]</text><polygon fill="#383838" points="321.5,518.5078,311.5,522.5078,321.5,526.5078,317.5,522.5078" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="315.5" x2="588.5" y1="522.5078" y2="522.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="327.5" y="517.4419">OK(jwt)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="61" x2="680" y1="531.5078" y2="531.5078"/><polygon fill="#383838" points="150.5,549.6406,140.5,553.6406,150.5,557.6406,146.5,553.6406" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="144.5" x2="588.5" y1="553.6406" y2="553.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="156.5" y="548.5747">401()</text><polygon fill="#383838" points="750.5,585.7734,760.5,589.7734,750.5,593.7734,754.5,589.7734" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="310.5" x2="756.5" y1="589.7734" y2="589.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="317.5" y="584.7075">authenticate(jwt,vuid)</text><path d="M688,602.7734 L688,627.7734 L843,627.7734 L843,612.7734 L833,602.7734 L688,602.7734 " fill="#ECECEC" filter="url(#f1devmk6onxmo0)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M833,602.7734 L833,612.7734 L843,612.7734 L833,602.7734 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="694" y="619.8403">user = getUser(vuid)</text><line style="stroke: #383838; stroke-width: 1.0;" x1="772.5" x2="814.5" y1="658.0391" y2="658.0391"/><line style="stroke: #383838; stroke-width: 1.0;" x1="814.5" x2="814.5" y1="658.0391" y2="671.0391"/><line style="stroke: #383838; stroke-width: 1.0;" x1="773.5" x2="814.5" y1="671.0391" y2="671.0391"/><polygon fill="#383838" points="783.5,667.0391,773.5,671.0391,783.5,675.0391,779.5,671.0391" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="779.5" y="652.9731">verify(jwt,user.pub)</text><path d="M61,686.0391 L125,686.0391 L125,693.0391 L115,703.0391 L61,703.0391 L61,686.0391 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="197.7969" style="stroke: #000000; stroke-width: 2.0;" width="833" x="61" y="686.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="76" y="699.106">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="140" y="698.2495">[isValid ?]</text><path d="M650,708.1719 L650,733.1719 L880,733.1719 L880,718.1719 L870,708.1719 L650,708.1719 " fill="#ECECEC" filter="url(#f1devmk6onxmo0)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M870,708.1719 L870,718.1719 L880,718.1719 L870,708.1719 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="656" y="725.2388">vendorJwt = encode(vuid,bearer)</text><polygon fill="#383838" points="321.5,759.4375,311.5,763.4375,321.5,767.4375,317.5,763.4375" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="315.5" x2="761.5" y1="763.4375" y2="763.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="327.5" y="758.3716">OK(vendorJwt)</text><line style="stroke: #383838; stroke-width: 1.0;" x1="310.5" x2="352.5" y1="792.5703" y2="792.5703"/><line style="stroke: #383838; stroke-width: 1.0;" x1="352.5" x2="352.5" y1="792.5703" y2="805.5703"/><line style="stroke: #383838; stroke-width: 1.0;" x1="311.5" x2="352.5" y1="805.5703" y2="805.5703"/><polygon fill="#383838" points="321.5,801.5703,311.5,805.5703,321.5,809.5703,317.5,805.5703" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="317.5" y="787.5044">setHeader(vendorJwt)</text><path d="M210,818.5703 L210,843.5703 L396,843.5703 L396,828.5703 L386,818.5703 L210,818.5703 " fill="#ECECEC" filter="url(#f1devmk6onxmo0)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M386,818.5703 L386,828.5703 L396,828.5703 L386,818.5703 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="216" y="835.6372">headers.auth = vendorJwt</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="61" x2="894" y1="853.7031" y2="853.7031"/><polygon fill="#383838" points="150.5,871.8359,140.5,875.8359,150.5,879.8359,146.5,875.8359" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="144.5" x2="766.5" y1="875.8359" y2="875.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="156.5" y="870.77">401()</text><polygon fill="#383838" points="150.5,907.9688,140.5,911.9688,150.5,915.9688,146.5,911.9688" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="144.5" x2="304.5" y1="911.9688" y2="911.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="156.5" y="906.9028">OK()</text><!--MD5=[f77e8211e75c90c4ba0c8afd7a35992d]
@startuml tideButtonFlow
skinparam monochrome true
skinparam ParticipantPadding 40


title Client - Button - Ork Flow
note over Client
c = {
  origin = window.origin
  sign = sign(window.origin,vendorPriv)
  server = backendServer
  ork = chosenOrkForModal
  public = vendorPub
}
end note
Client->TideButton: new TideButton(c)
activate TideButton


note over TideButton, Enclave
win = new Window(url: c.ork, name: c.origin,c.sign)
end note
Enclave->TideButton: opener.postMessage("onload")
activate Enclave
TideButton->Enclave: win.postMessage("init",c.server,c.public)
note over Enclave
tide = new Tide(c.server, c.public)
end note

note over Enclave
cvk = tide.register(user,pass);
token = encode({vuid,datetimeCheck},cvk.priv)
end note
Enclave->Enclave:validate(c.sign,c.public)
alt origin == sign && valid ?
 Enclave->TideButton:OK(jwt)
    else
  Enclave->Client:401()
end
deactivate Enclave
TideButton->Server:authenticate(jwt,vuid)
note over Server
user = getUser(vuid)
end note
activate Server
Server->Server: verify(jwt,user.pub)
alt isValid ?
  note over Server
  vendorJwt = encode(vuid,bearer)
  end note
  Server->TideButton:OK(vendorJwt)
  TideButton->TideButton:setHeader(vendorJwt)
  note over TideButton
    headers.auth = vendorJwt
  end note
    else
  Server->Client:401()
  deactivate Server
end
TideButton->Client:OK()
deactivate TideButton



' activate Enclave
'   note over User, Enclave
'      new Window(returnUrl, ClientId)
' end note
' Enclave->Ork:tide.login/register()
' activate Ork
' Ork->Enclave:success(cvk)
' deactivate Ork
'   note over  Enclave
'     token = generateJWT(cvk.private)
' end note
'  alt openerDomainValid ?
'      Enclave->User:postMessage(token)
'  else
'   Enclave->User:postMessage(invalid)
'  end
' deactivate Enclave
'   alt isServerToken ?
'      User->Client:getServerToken(token)
'      activate Client
'      Client->User:OK(generateServerJWT(token))
'       note over User
'   header.authorization = token
'  end note
'       User->Client:authorizedRequest()
'  else
'       note over User
'   header.authorization = token
'  end note
'   User->Client:authorizedRequest()
'  end
' Client->User:OK(privateData)
' deactivate Client

' User->Ork :Register with Tide
'     activate Ork
' note over User, Ork
'     new Window(returnUrl, ClientId)
' end note
' note over Ork
'     cvk = tide.login/register()
' end note
' alt openerDomainValid ?
'     Ork->User:postMessage(cvk)
' else
'  Ork->User:postMessage(invalid)
' end
' deactivate Ork
' User->Client:requestLogin(vuid)
'  activate Client
'  alt UserExists ?
'     note over Client
' User = fetchUser(vuid)
' token = generateJWT(User.vuid)
' eToken = encrypt(token, User.ClientAuth)
' end note
' Client->User:OK(eToken)
' else
' Client->User:NOTFOUND()
' end
' deactivate Client 
' note over User
' token = decrypt(eToken,User.ClientAuth)
' header.authorization = token
' end note
' activate Client
' User->Client: authorizedRequest()
' Client->User:OK()
' deactivate Client 
@enduml

@startuml tideButtonFlow
skinparam monochrome true
skinparam ParticipantPadding 40


title Client - Button - Ork Flow
note over Client
c = {
  origin = window.origin
  sign = sign(window.origin,vendorPriv)
  server = backendServer
  ork = chosenOrkForModal
  public = vendorPub
}
end note
Client->TideButton: new TideButton(c)
activate TideButton


note over TideButton, Enclave
win = new Window(url: c.ork, name: c.origin,c.sign)
end note
Enclave->TideButton: opener.postMessage("onload")
activate Enclave
TideButton->Enclave: win.postMessage("init",c.server,c.public)
note over Enclave
tide = new Tide(c.server, c.public)
end note

note over Enclave
cvk = tide.register(user,pass);
token = encode({vuid,datetimeCheck},cvk.priv)
end note
Enclave->Enclave:validate(c.sign,c.public)
alt origin == sign && valid ?
 Enclave->TideButton:OK(jwt)
    else
  Enclave->Client:401()
end
deactivate Enclave
TideButton->Server:authenticate(jwt,vuid)
note over Server
user = getUser(vuid)
end note
activate Server
Server->Server: verify(jwt,user.pub)
alt isValid ?
  note over Server
  vendorJwt = encode(vuid,bearer)
  end note
  Server->TideButton:OK(vendorJwt)
  TideButton->TideButton:setHeader(vendorJwt)
  note over TideButton
    headers.auth = vendorJwt
  end note
    else
  Server->Client:401()
  deactivate Server
end
TideButton->Client:OK()
deactivate TideButton




@enduml

PlantUML version 1.2020.18(Thu Oct 01 05:40:44 AEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: AU
--></g></svg>