<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="569px" preserveAspectRatio="none" style="width:738px;height:569px;" version="1.1" viewBox="0 0 738 569" width="738px" zoomAndPan="magnify"><defs><filter height="300%" id="f1ave9c75oof1x" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="86" x="324" y="28.708">AuditTrail</text><rect fill="#FFFFFF" filter="url(#f1ave9c75oof1x)" height="138.7969" style="stroke: #000000; stroke-width: 2.0;" width="485.5" x="238.5" y="329.7188"/><line style="stroke: #383838; stroke-width: 1.0;" x1="27" x2="27" y1="123.25" y2="133.25"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="27" x2="27" y1="133.25" y2="174.0547"/><line style="stroke: #383838; stroke-width: 1.0;" x1="27" x2="27" y1="174.0547" y2="485.5156"/><line style="stroke: #383838; stroke-width: 1.0;" x1="273.5" x2="273.5" y1="123.25" y2="133.25"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="273.5" x2="273.5" y1="133.25" y2="174.0547"/><line style="stroke: #383838; stroke-width: 1.0;" x1="273.5" x2="273.5" y1="174.0547" y2="485.5156"/><line style="stroke: #383838; stroke-width: 1.0;" x1="469.5" x2="469.5" y1="123.25" y2="133.25"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="469.5" x2="469.5" y1="133.25" y2="174.0547"/><line style="stroke: #383838; stroke-width: 1.0;" x1="469.5" x2="469.5" y1="174.0547" y2="485.5156"/><line style="stroke: #383838; stroke-width: 1.0;" x1="672" x2="672" y1="123.25" y2="133.25"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="672" x2="672" y1="133.25" y2="174.0547"/><line style="stroke: #383838; stroke-width: 1.0;" x1="672" x2="672" y1="174.0547" y2="485.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="5" y="119.9482">Client</text><ellipse cx="27.5" cy="49.9531" fill="#F8F8F8" filter="url(#f1ave9c75oof1x)" rx="8" ry="8" style="stroke: #383838; stroke-width: 2.0;"/><path d="M27.5,57.9531 L27.5,84.9531 M14.5,65.9531 L40.5,65.9531 M27.5,84.9531 L14.5,99.9531 M27.5,84.9531 L40.5,99.9531 " fill="none" filter="url(#f1ave9c75oof1x)" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="5" y="497.5107">Client</text><ellipse cx="27.5" cy="510.8125" fill="#F8F8F8" filter="url(#f1ave9c75oof1x)" rx="8" ry="8" style="stroke: #383838; stroke-width: 2.0;"/><path d="M27.5,518.8125 L27.5,545.8125 M14.5,526.8125 L40.5,526.8125 M27.5,545.8125 L14.5,560.8125 M27.5,545.8125 L40.5,560.8125 " fill="none" filter="url(#f1ave9c75oof1x)" style="stroke: #383838; stroke-width: 2.0;"/><rect fill="#F8F8F8" filter="url(#f1ave9c75oof1x)" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="46" x="248.5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="255.5" y="107.9482">Orks</text><rect fill="#F8F8F8" filter="url(#f1ave9c75oof1x)" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="46" x="248.5" y="484.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="255.5" y="504.5107">Orks</text><rect fill="#F8F8F8" filter="url(#f1ave9c75oof1x)" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="78" x="428.5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="435.5" y="107.9482">Simulator</text><rect fill="#F8F8F8" filter="url(#f1ave9c75oof1x)" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="78" x="428.5" y="484.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="435.5" y="504.5107">Simulator</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="631" y="119.9482">BlockChain</text><path d="M654.5,70.9531 C654.5,60.9531 672.5,60.9531 672.5,60.9531 C672.5,60.9531 690.5,60.9531 690.5,70.9531 L690.5,96.9531 C690.5,106.9531 672.5,106.9531 672.5,106.9531 C672.5,106.9531 654.5,106.9531 654.5,96.9531 L654.5,70.9531 " fill="#F8F8F8" filter="url(#f1ave9c75oof1x)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M654.5,70.9531 C654.5,80.9531 672.5,80.9531 672.5,80.9531 C672.5,80.9531 690.5,80.9531 690.5,70.9531 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="631" y="497.5107">BlockChain</text><path d="M654.5,510.8125 C654.5,500.8125 672.5,500.8125 672.5,500.8125 C672.5,500.8125 690.5,500.8125 690.5,510.8125 L690.5,536.8125 C690.5,546.8125 672.5,546.8125 672.5,546.8125 C672.5,546.8125 654.5,546.8125 654.5,536.8125 L654.5,510.8125 " fill="#F8F8F8" filter="url(#f1ave9c75oof1x)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M654.5,510.8125 C654.5,520.8125 672.5,520.8125 672.5,520.8125 C672.5,520.8125 690.5,520.8125 690.5,510.8125 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="306.5" y="157.4604">5 minutes later</text><polygon fill="#383838" points="261.5,191.1875,271.5,195.1875,261.5,199.1875,265.5,195.1875" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="27.5" x2="267.5" y1="195.1875" y2="195.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="34.5" y="190.1216">Login(tranid, username, password)</text><polygon fill="#ECECEC" filter="url(#f1ave9c75oof1x)" points="201,208.1875,346,208.1875,356,219.1875,346,231.1875,201,231.1875,191,219.1875,201,208.1875" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="203" y="224.2544">isSuccessful = verify()</text><line style="stroke: #383838; stroke-width: 1.0;" x1="273.5" x2="315.5" y1="272.5859" y2="272.5859"/><line style="stroke: #383838; stroke-width: 1.0;" x1="315.5" x2="315.5" y1="272.5859" y2="285.5859"/><line style="stroke: #383838; stroke-width: 1.0;" x1="274.5" x2="315.5" y1="285.5859" y2="285.5859"/><polygon fill="#383838" points="284.5,281.5859,274.5,285.5859,284.5,289.5859,280.5,285.5859" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="280.5" y="252.3872">storeLogs(tranid, username,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="284.5" y="267.52">isSuccessful, timestamp)</text><polygon fill="#383838" points="38.5,310.7188,28.5,314.7188,38.5,318.7188,34.5,314.7188" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="32.5" x2="272.5" y1="314.7188" y2="314.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="44.5" y="309.6528">isSuccessful</text><path d="M238.5,329.7188 L302.5,329.7188 L302.5,336.7188 L292.5,346.7188 L238.5,346.7188 L238.5,329.7188 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="138.7969" style="stroke: #000000; stroke-width: 2.0;" width="485.5" x="238.5" y="329.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="253.5" y="342.7856">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="168" x="317.5" y="341.9292">[totalMinutes mod 5 == 0]</text><polygon fill="#383838" points="457.5,363.9844,467.5,367.9844,457.5,371.9844,461.5,367.9844" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="273.5" x2="463.5" y1="367.9844" y2="367.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="280.5" y="362.9185">audit(orkid, logs)</text><polygon fill="#ECECEC" filter="url(#f1ave9c75oof1x)" points="317,380.9844,622,380.9844,632,399.9844,622,418.9844,317,418.9844,307,399.9844,317,380.9844" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="301" x="319" y="397.0513">cnt = count(groupLogsBy(tranid, isSuccessful))</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="319" y="412.1841">wasSuccessful = cnt &gt;= thershold</text><polygon fill="#383838" points="660.5,456.5156,670.5,460.5156,660.5,464.5156,664.5,460.5156" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="469.5" x2="666.5" y1="460.5156" y2="460.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="476.5" y="440.3169">store(tranid, username,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="480.5" y="455.4497">wasSuccessful, timestamp)</text><!--MD5=[416b5c31cdc2a8673a1de77457a69ad0]
@startuml tideButtonFlow
skinparam monochrome true

title AuditTrail

actor Client
participant Orks
participant Simulator
database BlockChain


...5 minutes later...
Client -> Orks: Login(tranid, username, password)

hnote over Orks: isSuccessful = verify()
Orks -> Orks: storeLogs(tranid, username,\n isSuccessful, timestamp)
Orks - -> Client: isSuccessful

alt totalMinutes mod 5 == 0

Orks - -> Simulator: audit(orkid, logs)

hnote over Simulator
  cnt = count(groupLogsBy(tranid, isSuccessful))
  wasSuccessful = cnt >= thershold
end note

Simulator - -> BlockChain: store(tranid, username,\n wasSuccessful, timestamp)

end
@enduml

PlantUML version 1.2020.18(Thu Oct 01 05:40:44 AEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: AU
--></g></svg>