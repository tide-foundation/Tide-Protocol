<!DOCTYPE HTML>

<html>
<head>
<title>postMessage() Demo</title>
<style>
body {
  background-color: lightgray;
}

iframe {
  display:block;
  width:500px;
  height:300px;
  /* margin:50px auto; */
  margin-top: 5px;
  border: medium solid black;
  background-color: white;
}
</style>
</head>
<body>
<h1>postMessage() Demo</h1>

<div class="container-fluid">
<p>
  <form id="form">
    <input type="text" id="msg" placeholder="Type message to send"/>
    <input type="submit" value="Send message" />
  </form>
  <p id="msg">&nbsp;</p>
  <iframe id="externalContent" src="https://tideclient.azurewebsites.net/postMessageReceiver.html"></iframe>
</p>
</div>

<br/>
<br/>
<br/>
<hr />

<script>
  window.setTimeout(()=>{
var ORIGIN = "https://tideclient.azurewebsites.net";

addEventListener("message", (event)=>{

  console.log(event);
}, true);

//send a message into the hosted iFrame...
document.getElementById("form").onsubmit = function(e){
  var win = document.getElementById("externalContent").contentWindow;
  win.postMessage(document.getElementById("msg").value, ORIGIN);
  return false;
};
  }, 300);
  
</script>
</body>
</html>
